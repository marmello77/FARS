---
title: "FARS"
author: "Marco Mello"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{FARS}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup, echo=TRUE, include=FALSE}
library(FARS)
library(maps)
library(tidyverse)
```

This is the final Peer-graded Assignment from Coursera's Building an R Package. 

The `FARS` package contains functions provided for the students. These functions were written to analyze data from the [US National Highway Traffic Safety Administration's Fatality Analysis Reporting System](https://www.nhtsa.gov) (FARS). FARS is a nationwide census providing the American public yearly data regarding fatal injuries suffered in motor vehicle traffic crashes.


## Included data

Data files included within the package are:

```{r}
list.files(system.file("extdata", package = "fars"))
```


## Functions

The package contains five functions used to read, name, filter, summarize, and plot the data.

1. `fars_read`: This function reads data in CSV format into R. First, it checks whether the file already exists in the working directory. If the file does not exist, you get an error message.Second, if the CSV file exists, it is read into R. Third, the data are converted to a tibble.

2. `make_filename`: This function makes a file name. First, the inputted year will be converted to an integer. The value must be a simple year without quotes. Second, the year will be added to the middle of a string that represents the main pattern of the file name, in the placeholder for an integer. 

3. `fars_read_years`: This function reads specific variables from the data. It reads two specific columns, MONTH and year, from the input files, and then stores them as data frames in a list. It works by calling the function `make_filename` from within.

4. `fars_summarize_years`: This function summarizes the accidents by year and month for the data frames imported. It calls the function `fars_read_years` from within.

5. `fars_map_state`: This function plots a map with the locations of accidents for the selected state and year.It calls the functions \code{make_filename} and `fars_read` from within. 
